<script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script src="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/cartodb.js"></script>
<link rel="stylesheet" href="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/themes/css/cartodb.css" />
<link rel='stylesheet' href="/sites/all/libraries/policy/map.css">
<div id="mapContainer"></div>

<div id="policy-info" class="panel panel-danger">
	<div><a class="close">&times;</a></div>
	<div class="panel-heading">
		<span id="inv0">Choose a city from the map to see its anti-displacement policy measures</span>
	</div>
	<ul class="list-group">
        <li class="list-group-item">Just Cause eviction ordinance
            <a class="info" href="#Just_Evict"></a>:
            &nbsp;&nbsp;<span id="inv1">-</span></li>
        <li class="list-group-item">Rent Control/Stabilization
            <a class="info nav-link" href="#Rent_Control"></a>:
            &nbsp;&nbsp;<span id="inv2">-</span></li>
        <li class="list-group-item">Rent review boards and/or mediation
            <a class="info" href="#Rent_Mediation"></a>:
            &nbsp;&nbsp;<span id="inv3">-</span></li>
        <li class="list-group-item">Mobile Home Rent Control
            <a class="info" href="#Mobile_Home"></a>:
            &nbsp;&nbsp;<span id="inv4">-</span></li>
        <li class="list-group-item">SRO (Single-Room Occupancy) Preservation
            <a class="info" href="#SRO"></a>:
            &nbsp;&nbsp;<span id="inv5">-</span></li>
        <!-- <li class="list-group-item">Graduated density bonus
            <a class="info" href="#Grad_Density"></a>:
            &nbsp;&nbsp;<span id="inv6">-</span></li>
        <li class="list-group-item">Mixed-use zoning
            <a class="info" href="#MU_Zone"></a>:
            &nbsp;&nbsp;<span id="inv7">-</span></li> -->
        <li class="list-group-item">Condominium conversion regulations
            <a class="info" href="#Condo_Conv"></a>:
            &nbsp;&nbsp;<span id="inv6">-</span></li>
        <!-- <li class="list-group-item">Form-based code
            <a class="info" href="#Form_Based"></a>:
            &nbsp;&nbsp;<span id="inv9">-</span></li>
        <li class="list-group-item">Housing overlay zone
            <a class="info" href="#Housing_Overlay"></a>:
            &nbsp;&nbsp;<span id="inv10">-</span></li> -->
        <li class="list-group-item">Density bonus ordinance (greater than state)
            <a class="info" href="#Density"></a>:
            &nbsp;&nbsp;<span id="inv7">-</span></li>
        <li class="list-group-item">Inclusionary zoning/housing (Below Market Rate Housing)
            <a class="info" href="#Incl_Housing"></a>:
            &nbsp;&nbsp;<span id="inv8">-</span></li>
        <!-- <li class="list-group-item">In-lieu fees (inclusionary zoning)
            <a class="info" href="#In_Lieu"></a>:
            &nbsp;&nbsp;<span id="inv13">-</span></li>
        <li class="list-group-item">Homeowner repair or rehabilitation
            <a class="info" href="#Home_Rehab"></a>:
            &nbsp;&nbsp;<span id="inv14">-</span></li> -->
        <li class="list-group-item">Jobs-Housing Linkage Fee or Affordable Housing Impact/Linkage Fee
            <a class="info" href="#Res_Fee"></a>:
            &nbsp;&nbsp;<span id="inv9">-</span></li>
        <li class="list-group-item">Commercial linkage fee
            <a class="info" href="#Comm_Fee"></a>:
            &nbsp;&nbsp;<span id="inv10">-</span></li>
        <!-- <li class="list-group-item">Local homebuyer assistance
            <a class="info" href="#Buyer_Assist"></a>:
            &nbsp;&nbsp;<span id="inv17">-</span></li> -->
        <li class="list-group-item">Foreclosure assistance
            <a class="info" href="#Foreclose_Assist"></a>:
            &nbsp;&nbsp;<span id="inv11">-</span></li>
        <li class="list-group-item">Community land trusts
            <a class="info" href="#Comm_Trust"></a>:
            &nbsp;&nbsp;<span id="inv12">-</span></li>
        <li class="list-group-item">Housing trust fund
            <a class="info" href="#Aff_Fund"></a>:
            &nbsp;&nbsp;<span id="inv13">-</span></li>
        <li class="list-group-item">First Source Hiring Ordinances
            <a class="info" href="#First_Source"></a>:
            &nbsp;&nbsp;<span id="inv14">-</span></li>
        <li class="panel-footer"><a target="_blank" id="inv15">Source Info</a></li>
    </ul>
</div>

<!-- POLICY SELECTOR DROPDOWN MENU -->

<div id="layerSelectionContainer">
<div class="dropdown">
<!-- this button style is from the Bootstrap library -->
  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
    Map a specific policy...
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu scrollable-menu" id="layer-selector" aria-labelledby="dropdownMenuDivider">
    <li data-url="/sites/all/libraries/policy/viz/policies_count.js" class="active">
        <a>Number of anti-displacement policies</a></li>
    <li role="separator" class="divider"></li>
    <li data-url="/sites/all/libraries/policy/viz/1just_evict.js">
        <a>Just Cause eviction ordinance</a></li>
    <li data-url="/sites/all/libraries/policy/viz/2rent_control.js">
        <a>Rent Control/Stabilization</a></li>
    <li data-url="/sites/all/libraries/policy/viz/3rent_mediation.js">
        <a>Rent review boards/mediation</a></li>
    <li data-url="/sites/all/libraries/policy/viz/4mobile_home.js">
        <a>Mobile Home Rent Control</a></li>
    <li data-url="/sites/all/libraries/policy/viz/5sro.js">
        <a>SRO preservation</a></li>
    <!-- <li data-url="/sites/all/libraries/policy/viz/6grad_density.js">
        <a>Graduated density bonus</a></li>
    <li data-url="/sites/all/libraries/policy/viz/7mu_zone.js">
        <a>Mixed-use zoning</a></li> -->
    <li data-url="/sites/all/libraries/policy/viz/8condo_conv.js">
        <a>Condominium conversion regulations</a></li>
    <!-- <li data-url="/sites/all/libraries/policy/viz/9form_based.js">
        <a>Form-based code</a></li>
    <li data-url="/sites/all/libraries/policy/viz/10housing_overlay.js">
        <a>Housing overlay zone</a></li> -->
    <li data-url="/sites/all/libraries/policy/viz/11loc_density.js">
        <a>Density bonus ordinance</a></li>
    <li data-url="/sites/all/libraries/policy/viz/12incl_housing.js">
        <a>Inclusionary zoning</a></li>
    <!-- <li data-url="/sites/all/libraries/policy/viz/13in_lieu.js">
        <a>In-lieu fees (inclusionary zoning)</a></li>
    <li data-url="/sites/all/libraries/policy/viz/14home_rehab.js">
        <a>Homeowner repair or rehabilitation</a></li> -->
    <li data-url="/sites/all/libraries/policy/viz/15res_fee.js">
        <a>Jobs-housing linkage fee</a></li>
    <li data-url="/sites/all/libraries/policy/viz/16comm_fee.js">
        <a>Commercial linkage fee</a></li>
    <!-- <li data-url="/sites/all/libraries/policy/viz/17buyer_assist.js">
        <a>Local homebuyer assistance</a></li> -->
    <li data-url="/sites/all/libraries/policy/viz/18foreclose_assist.js">
        <a>Foreclosure assistance</a></li>
    <li data-url="/sites/all/libraries/policy/viz/19comm_trust.js">
        <a>Community land trusts</a></li>
    <li data-url="/sites/all/libraries/policy/viz/20aff_fund.js">
        <a>Housing trust fund</a></li>
    <li data-url="/sites/all/libraries/policy/viz/21first_source.js">
        <a>First source hiring</a></li>
  </ul>
</div>
</div>

<!-- CITY SELECTOR DROPDOWN MENU -->

<div id ="geoSelectionContainer">
<div class="dropdown">
<!-- this button style is from the Bootstrap library -->
  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
    Find a city...
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu scrollable-menu" id="geo-selector" aria-labelledby="dropdownMenuDivider">
    <li data-geo="all" class="active"><a href="#">SHOW ALL</a></li>
    <li role="separator" class="divider"></li>
    <li data-geo="city"><a>Agoura Hills</a></li>
        </a></li>
        <li data-geo="city"><a>Alhambra</a></li>
        </a></li>
        <li data-geo="city"><a>Arcadia</a></li>
        </a></li>
        <li data-geo="city"><a>Artesia</a></li>
        </a></li>
        <li data-geo="city"><a>Avalon</a></li>
        </a></li>
        <li data-geo="city"><a>Azusa</a></li>
        </a></li>
        <li data-geo="city"><a>Baldwin Park</a></li>
        </a></li>
        <li data-geo="city"><a>Bell</a></li>
        </a></li>
        <li data-geo="city"><a>Bell Gardens</a></li>
        </a></li>
        <li data-geo="city"><a>Bellflower</a></li>
        </a></li>
        <li data-geo="city"><a>Beverly Hills</a></li>
        </a></li>
        <li data-geo="city"><a>Bradbury</a></li>
        </a></li>
        <li data-geo="city"><a>Burbank</a></li>
        </a></li>
        <li data-geo="city"><a>Calabasas</a></li>
        </a></li>
        <li data-geo="city"><a>Carson</a></li>
        </a></li>
        <li data-geo="city"><a>Cerritos</a></li>
        </a></li>
        <li data-geo="city"><a>Claremont</a></li>
        </a></li>
        <li data-geo="city"><a>Commerce</a></li>
        </a></li>
        <li data-geo="city"><a>Compton</a></li>
        </a></li>
        <li data-geo="city"><a>Covina</a></li>
        </a></li>
        <li data-geo="city"><a>Cudahy</a></li>
        </a></li>
        <li data-geo="city"><a>Culver City</a></li>
        </a></li>
        <li data-geo="city"><a>Diamond Bar</a></li>
        </a></li>
        <li data-geo="city"><a>Downey</a></li>
        </a></li>
        <li data-geo="city"><a>Duarte</a></li>
        </a></li>
        <li data-geo="city"><a>El Monte</a></li>
        </a></li>
        <li data-geo="city"><a>El Segundo</a></li>
        </a></li>
        <li data-geo="city"><a>Gardena</a></li>
        </a></li>
        <li data-geo="city"><a>Glendale</a></li>
        </a></li>
        <li data-geo="city"><a>Glendora</a></li>
        </a></li>
        <li data-geo="city"><a>Hawaiian Gardens</a></li>
        </a></li>
        <li data-geo="city"><a>Hawthorne</a></li>
        </a></li>
        <li data-geo="city"><a>Hermosa Beach</a></li>
        </a></li>
        <li data-geo="city"><a>Hidden Hills</a></li>
        </a></li>
        <li data-geo="city"><a>Huntington Park</a></li>
        </a></li>
        <li data-geo="city"><a>Industry</a></li>
        </a></li>
        <li data-geo="city"><a>Inglewood</a></li>
        </a></li>
        <li data-geo="city"><a>Irwindale</a></li>
        </a></li>
        <li data-geo="city"><a>La Cañada Flintridge</a></li>
        </a></li>
        <li data-geo="city"><a>La Habra Heights</a></li>
        </a></li>
        <li data-geo="city"><a>La Mirada</a></li>
        </a></li>
        <li data-geo="city"><a>La Puente</a></li>
        </a></li>
        <li data-geo="city"><a>La Verne</a></li>
        </a></li>
        <li data-geo="city"><a>Lakewood</a></li>
        </a></li>
        <li data-geo="city"><a>Lancaster</a></li>
        </a></li>
        <li data-geo="city"><a>Lawndale</a></li>
        </a></li>
        <li data-geo="city"><a>Lomita</a></li>
        </a></li>
        <li data-geo="city"><a>Long Beach</a></li>
        </a></li>
        <li data-geo="city"><a>Los Angeles City</a></li>
        </a></li>
        <li data-geo="city"><a>Los Angeles County</a></li>
        </a></li>
        <li data-geo="city"><a>Lynwood</a></li>
        </a></li>
        <li data-geo="city"><a>Malibu</a></li>
        </a></li>
        <li data-geo="city"><a>Manhattan Beach</a></li>
        </a></li>
        <li data-geo="city"><a>Maywood</a></li>
        </a></li>
        <li data-geo="city"><a>Monrovia</a></li>
        </a></li>
        <li data-geo="city"><a>Montebello</a></li>
        </a></li>
        <li data-geo="city"><a>Monterey Park</a></li>
        </a></li>
        <li data-geo="city"><a>Norwalk</a></li>
        </a></li>
        <li data-geo="city"><a>Palmdale</a></li>
        </a></li>
        <li data-geo="city"><a>Palos Verdes Estates</a></li>
        </a></li>
        <li data-geo="city"><a>Paramount</a></li>
        </a></li>
        <li data-geo="city"><a>Pasadena</a></li>
        </a></li>
        <li data-geo="city"><a>Pico Rivera</a></li>
        </a></li>
        <li data-geo="city"><a>Pomona</a></li>
        </a></li>
        <li data-geo="city"><a>Rancho Palos Verdes</a></li>
        </a></li>
        <li data-geo="city"><a>Redondo Beach</a></li>
        </a></li>
        <li data-geo="city"><a>Rolling Hills</a></li>
        </a></li>
        <li data-geo="city"><a>Rolling Hills Estates</a></li>
        </a></li>
        <li data-geo="city"><a>Rosemead</a></li>
        </a></li>
        <li data-geo="city"><a>San Dimas</a></li>
        </a></li>
        <li data-geo="city"><a>San Fernando</a></li>
        </a></li>
        <li data-geo="city"><a>sSan Gabriel</a></li>
        </a></li>
        <li data-geo="city"><a>San Marino</a></li>
        </a></li>
        <li data-geo="city"><a>Santa Clarita</a></li>
        </a></li>
        <li data-geo="city"><a>Santa Fe Springs</a></li>
        </a></li>
        <li data-geo="city"><a>Santa Monica</a></li>
        </a></li>
        <li data-geo="city"><a>Sierra Madre</a></li>
        </a></li>
        <li data-geo="city"><a>Signal Hill</a></li>
        </a></li>
        <li data-geo="city"><a>South El Monte</a></li>
        </a></li>
        <li data-geo="city"><a>South Gate</a></li>
        </a></li>
        <li data-geo="city"><a>South Pasadena</a></li>
        </a></li>
        <li data-geo="city"><a>Temple City</a></li>
        </a></li>
        <li data-geo="city"><a>Torrance</a></li>
        </a></li>
        <li data-geo="city"><a>Vernon</a></li>
        </a></li>
        <li data-geo="city"><a>Walnut</a></li>
        </a></li>
        <li data-geo="city"><a>West Covina</a></li>
        </a></li>
        <li data-geo="city"><a>West Hollywood</a></li>
        </a></li>
        <li data-geo="city"><a>Westlake Village</a></li>
        </a></li>
        <li data-geo="city"><a>Whittier</a></li>
        </a></li></ul>
</div>
</div>

<div class="expand-map">
	<a onclick="expandMap();" class="btn btn-primary">
		Larger <span class="glyphicon glyphicon-chevron-down"></span> Map</a></div>

<script src="/sites/all/libraries/policy/js/inventory.js"></script>
<script src="/sites/all/libraries/policy/js/map.js"></script>

<style>
#map div.cartodb-legend-stack div.cartodb-legend li.min {
	float: left;
	width: 20%;
	text-align: center;
}
#map div.cartodb-legend-stack div.cartodb-legend li.median {
	float: left;
	width: 60%;
	text-align: center;
}
#map div.cartodb-legend-stack div.cartodb-legend li.max {
	float: right;
	width: 20%;
	text-align: center;
}
/* don't show the popups */
.cartodb-popup {
	display: none;
}

#mapContainer {
	border-top: 1px solid #ccc;
	border-bottom: 1px solid #ccc;
	margin-left: 0;
	margin-right: 0;
	width: 100%;
	height: 550px;
	padding: 0;
}

/* policy info panel */
#policy-info {
	position: absolute;
	z-index: 1000000;
	top: 15px;
	left: 20px;
	width: auto;
        max-width: 480px;
	background-color: white;
	box-shadow: rgba(0,0,0,.1) 0 0 4px 2px;
	font-size: 12px;
}
#policy-info a.info {
    background: url(/sites/default/files/images/info.gif) center right no-repeat;
    padding-right: 16px;
}
#policy-info a.external {
    background: url(/sites/default/files/images/external_link.png) center right no-repeat;
    padding-right: 13px;
}
#policy-info .panel-heading {
	padding-right: 20px;
	font-size: 16px;
	font-weight: bold;
}
#policy-info .panel-heading:hover {
	cursor: pointer;
}
#policy-info .list-group-item {
	padding-top: 4px;
	padding-bottom: 4px;
}

/* close button */
.close {
  font-size: 20px;
  font-weight: bold;
  line-height: 18px;
  color: #000000;
  text-shadow: 0 1px 0 #ffffff;
  opacity: 0.2;
  filter: alpha(opacity=20);
  text-decoration: none;
  padding-right: 5px;
}
.close:hover {
  color: #000000;
  text-decoration: none;
  opacity: 0.4;
}

/* overrides default style for legends */
#map .cartodb-legend-stack {
	right: 30px;
	width: 280px;
}
#map .cartodb-legend-stack .cartodb-legend .legend-title {
	font-family: 'Open Sans', sans-serif;
	color: black;
	font-size: 12px;
	font-weight: bold;
	text-transform: none;
}
#map .cartodb-legend-stack .cartodb-legend li {
	font-family: 'Open Sans', sans-serif;
	color: black;
	font-size: 12px;
	font-weight: normal;
	text-transform: none;
}
#map .cartodb-legend-stack .cartodb-legend li .bullet {
	height: 10px;
	width: 10px;
}
#map div.cartodb-legend-stack div.cartodb-legend li.min {
	float: left;
	width: 20%;
	text-align: center;
}
#map div.cartodb-legend-stack div.cartodb-legend li.median {
	float: left;
	width: 60%;
	text-align: center;
}
#map div.cartodb-legend-stack div.cartodb-legend li.max {
	float: right;
	width: 20%;
	text-align: center;
}

/* overrides default style for tooltips */
#map .cartodb-tooltip-content {
	padding: 6px;
}
#map .cartodb-tooltip-content p {
	font-family: 'Open Sans', sans-serif;
	font-size: 11px;
}
#map .cartodb-searchbox .text {
	font-family: 'Open Sans', sans-serif;
	font-size: 12px;
}

/* overrides default style for zoom icons */
#map .cartodb-zoom {
	position: absolute;
	right: 35px;
}

/* add scrolling to bootstrap menus */
.scrollable-menu {
    height: auto;
    max-height: 450px;
    overflow-x: hidden;
}

#layerSelectionContainer {
    position: absolute;
    top: 22px;
    right: 100px;
    padding: 0px;
    left: auto;
}

#geoSelectionContainer {
    position: absolute;
    top: 68px;
    right: 100px;
    padding: 0px;
    left: auto;
}

@media only screen
and (max-width: 380px) {

	.mobile-hide {
		display: none;
	}
	#topBanner {
		display: none;
	}
	#mapContainer {
		height: 400px;
	}
	#policy-info {
		width: 90%;
		top: 350px;
		margin: 0 auto;
	}
	div .cartodb-legend-stack {
		visibility: hidden;
	}
	#layerSelectionContainer {
		display: none;
	}
	#geoSelectionContainer {
		display: none;
	}
	div.expand-map {
		display: none;
	}
}

</style>
